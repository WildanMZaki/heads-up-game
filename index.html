<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guest Game - Flip to Change Word</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f8f9fa;
            overflow: hidden;
        }
        #gameContainer {
            text-align: center;
        }
        #countdown, #wordDisplay, #debugInfo {
            font-size: 8rem; /* Large text to fill screen */
            font-weight: bold;
            margin-top: 20px;
        }
        #wordDisplay {
            width: 85%;
            margin: 0 auto;
            font-size: 10rem; /* Make word display very large */
        }
        #debugInfo {
            color: red;
            font-size: 2rem; /* Smaller for debug info */
        }
    </style>
</head>
<body>

    <div id="gameContainer" class="game-container d-none">
        <h1 id="countdown" class="d-none"></h1>
        <div id="wordDisplay" class="word-display d-none"></div>
        <div id="debugInfo"></div> <!-- Debugging for phone tilt info -->
    </div>
    <button id="startBtn" class="btn btn-primary btn-lg">Start</button>

    <script>
        let words = ["PHP", "JavaScript", "HTML", "CSS", "Python", "Java", "C++", "Ruby"];
        let currentWordIndex = 0;
        let gameStarted = false;
        let isWordChangingAllowed = true; // To handle delay between word changes

        const gameContainer = $('#gameContainer');
        const wordDisplay = $('#wordDisplay');
        const countdown = $('#countdown');
        const startBtn = $('#startBtn');
        const debugInfo = $('#debugInfo'); // Debugging info element

        // Full-screen request
        function requestFullScreen() {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
            } else if (document.documentElement.mozRequestFullScreen) {
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) {
                document.documentElement.msRequestFullscreen();
            }
        }

        // Rotate the screen to landscape
        function lockScreenOrientation() {
            if (screen.orientation && screen.orientation.lock) {
                screen.orientation.lock('landscape').catch(function(error) {
                    console.error("Screen orientation lock failed:", error);
                });
            } else {
                console.warn("Screen orientation lock is not supported by this browser.");
            }
        }

        // Randomize word selection
        function randomizeWord() {
            const randomIndex = Math.floor(Math.random() * words.length);
            const word = words[randomIndex];
            words.splice(randomIndex, 1);  // Remove the word from array
            return word;
        }

        // Countdown and word randomization display
        function startGameSequence() {
            gameContainer.removeClass('d-none');
            startBtn.addClass('d-none');

            let countdownValue = 3;
            countdown.removeClass('d-none').text(countdownValue);

            // Countdown from 3 to 1
            const countdownInterval = setInterval(() => {
                countdownValue--;
                if (countdownValue > 0) {
                    countdown.text(countdownValue);
                } else {
                    clearInterval(countdownInterval);
                    countdown.addClass('d-none');
                    showRandomWord();
                }
            }, 1000);
        }

        // Show a single random word after the countdown
        function showRandomWord() {
            if (words.length > 0) {
                const word = randomizeWord();
                wordDisplay.text(word).removeClass('d-none');
            } else {
                wordDisplay.text("No more words!").removeClass('d-none');
            }
        }

        // Handle phone rotation to change word
        window.addEventListener('deviceorientation', function(event) {
            const alpha = event.alpha; // Use alpha for rotation detection
            const orientation = window.orientation;

            // Check if phone is in landscape and rotated
            if (alpha > 45 && alpha < 135 && gameStarted && isWordChangingAllowed && (orientation === 90 || orientation === -90)) {
                isWordChangingAllowed = false;

                // Show the next word
                showRandomWord();

                // Delay before another change is allowed
                setTimeout(() => {
                    isWordChangingAllowed = true;
                }, 3000);
            }
        });

        // Start button event
        startBtn.on('click', function() {
            if (!gameStarted) {
                gameStarted = true;
                requestFullScreen();
                lockScreenOrientation();
                startGameSequence();
            }
        });

    </script>

</body>
</html>
